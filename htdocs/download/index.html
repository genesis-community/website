<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,target-densitydpi=device-dpi">
<meta name="generator" content="verse">
<meta name="X-UA-Compatible" content="IE=edge">

<link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


<title>Genesis</title>


<link rel="stylesheet" href="/site.css?36b8443d934f1beca13af53179c1289057cf340c">
<link rel="alternate home" type="application/rss+xml" title="Genesis - RSS feed" href="/feed.xml">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-50822525-8"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-50822525-8');</script>
</head>
<body>
  <header class="top">
    <img src="/logo.png?ff43466a0e4d90211659736aeee333c9b4d0fa77">
    <nav>
      <li><a href="/">Home</a></li>
      <li><a href="/download/">Download</a></li>
      <li><a href="/community/">Community</a></li>
      <li><a href="/docs/">Docs</a></li>
    </nav>
  </header>

    <div class="header">
    <div>
      <h1>Download Genesis</h1>
      <h2>Get You Some Genesis</h2>
    </div>
  </div>

  <div class="content downloads">
    <div>
      <nav>
        <h2>Latest Stable</h2>
        <li><a href="#latest">Genesis v2.8.6</a></li>
        <h2>Historic Releases</h2>
        
        <li><a href="#v2.8.5">2.8.5</a></li>
        
        <li><a href="#v2.8.4">2.8.4</a></li>
        
        <li><a href="#v2.8.3-rc.4">2.8.3-rc.4</a></li>
        
        <li><a href="#v2.8.3">2.8.3</a></li>
        
        <li><a href="#v2.8.2">2.8.2</a></li>
        
        <li><a href="#v2.8.1">2.8.1</a></li>
        
        <li><a href="#v2.8.0">2.8.0</a></li>
        
        <li><a href="#v2.7.35">2.7.35</a></li>
        
        <li><a href="#v2.7.34">2.7.34</a></li>
        
        <li><a href="#v2.7.33">2.7.33</a></li>
        
        <li><a href="#v2.7.32">2.7.32</a></li>
        
        <li><a href="#v2.7.31">2.7.31</a></li>
        
      </nav>
    </div>

    <div id="v2.8.6">
      <h1 id="latest">Genesis v2.8.6</h1>
      
        <h2>Improvements</h2>

<ul>
<li><p>Clarified create-kit help description regarding the -n option to indicate
that it automatically adds "-genesis-kit" suffix</p></li>
<li><p>The generated scaffolding now has the base manifest default to use bionic stemcells</p></li>
<li><p><code>genesis bosh</code> now supports all the basic options, including
--[no-]color, -q|--quiet, -D|--debug, -T|--trace, and -S|--show-stack.</p></li>
<li><p>Add the yaml files used during the check process of deployment.  This
is especially useful when running deployments in pipelines, and when
running the spec tests.  To enable it, set the environment variable
GENESIS<em>CHECK</em>YAML<em>ON</em>DEPLOY to a truthy value (1, yes, true, Y) and
export it (or set it in params section of the deploy task).</p></li>
<li><p>Add pre-deploy and post-deploy reactions on a per-environment basis.</p>

<p>Sometimes different environments need to perform tasks prior to and
after doing a deploy.  This feature allows you to specify scripts that
will be run in those circumstances.  Add the following structure to
your environment file:</p>

<p><code>
genesis:
reactions:
  pre-deploy:
    - script: put-up-maintenance-page
    - script: update-jira
      args:   [ 'some-argument', '$SOME_ENV_VAR' ]
  post-deploy:
    - addon: valid-addon-for-kit
    - script: remove-maintenance-page
</code></p>

<p>The scripts are located in the bin/ dir under the repository root
directory, and are propagated via the pipeline cache system.</p>

<p>The scripts have access to the following environment variables:</p>

<ul>
<li><p>GENESIS<em>PREDEPLOY</em>DATAFILE -- file path that contains any data
gathered by the predeploy hook</p></li>
<li><p>GENESIS<em>MANIFEST</em>FILE -- file path to the full unredacted unpruned
manifest for the current deployment</p></li>
<li><p>GENESIS<em>BOSHVARS</em>FILE -- file path to any BOSH variables for the
deployment</p></li>
<li><p>GENESIS<em>DEPLOY</em>OPTIONS -- JSON representation of the options passed
to the deploy call</p></li>
<li><p>GENESIS<em>DEPLOY</em>DRYRUN -- "true" if the deployment is a dry-run,
"false" otherwise</p></li>
<li><p>GENESIS<em>DEPLOY</em>RC -- return code of the BOSH deploy call.  0 if
successful, 1 otherwise.  Only available for post-deploy reactions</p></li>
</ul></li>
<li><p>You can now specify where your alternative BOSH director's credentials
can be found.</p>

<p>By convention, your BOSH environment (the director you are using to
deploy your environment) is the same name as the environment you are
deploying, and its credentials are stored in <code>exodus</code> in the same
vault.</p>

<p>This isn't possible when what you're deploying is another BOSH
director, so Genesis has always made it possible to specify another
BOSH environment alias, via the <code>genesis.bosh_env</code> parameter, and
before that, via the <code>params.bosh</code> in the bosh kit.</p>

<p>Furthermore, if you deployed your BOSH director with a non-standard
kit, you could specify that deployment-type as such:
<code>&lt;alias&gt;/&lt;deployment-type&gt;</code>.  By default, that deployment type is
<code>bosh</code></p>

<p>When v2.8.0 came around, we started storing access for the credentials
to the BOSH director in vault.  While we always recommend using a
single vault for all deployments in your deploy repo, some companies
have policies that don't allow that.  To this end, you can now specify
which vault and exodus base path under which your BOSH director
credentials can be found.  This extends <code>genesis.bosh_env</code> with the
following pattern:</p>

<p><code>
&lt;alias&gt;[/&lt;deployment-type&gt;][@[http(s?)://&lt;host&gt;[:&lt;port]/]&lt;base-path&gt;]
</code></p>

<p>We still recommend a single vault and single exodus base path whenever
possible, as most of the existing kits that use exodus data do not
have the ability to specify an alternative vault or path.  This simply
allows the layering of nested BOSHes to work within the confines of
corporate security policies.</p></li>
<li><p>Adds a <code>--fix-releases</code> option to deployment for when you need to re-upload
a bosh release.  This is rarely needed, mainly if you change the underlying
stemcell to a new OS.</p></li>
<li><p>Support --recreate-persistent-disks on deploy for both deploy and
create-env environments.</p></li>
<li><p><code>genesis decompile-kit</code> will now accept file with .yml suffix</p></li>
</ul>

<h2>Kit Authoring Improvements</h2>

<ul>
<li><p>Added print<em>addon</em>descriptions and run<em>extended</em>addon helpers to
support extended addon scripts.</p>

<p>Rather than have all the addons in the <code>hooks/addon</code> file, you can add
individual <code>hook/addon-&lt;name&gt;~&lt;shortcut&gt;</code>.  To do so, you need to
follow the following conventions:</p>

<ul>
<li><p>The script gets passed as its first argument the action to take.
This is either help or run.  Help prints out the description to be
used in list, and run causes the script to run.</p></li>
<li><p>The main hooks/addon script must use print<em>addon</em>descriptions in its
list command block, with alternative arguments of the base commands
and descriptions.  Example:</p></li>
</ul>

<p><code>
list) print_addon_descriptions \
        "command" "description of command" \
        "another" "description of another command" ;;
</code></p>

<ul>
<li>The main hook/addon script uses run<em>extended</em>addon as its catch-all
<code>*)</code> block.</li>
</ul></li>
<li><p>You can now find more genesis environment information in the manifest.
In addition to the existing keys under <code>genesis.</code>, you can now find
the vaultified environment (dashes into slashes) in
<code>genesis.vault_env</code>, and the full path for the secrets and exodus
base: <code>genesis.secrets_base</code> and <code>genesis.exodus_base</code> respectively.
<code>genesis.secrets_base</code> is the same value as <code>meta.vault</code> but with the
trailing <code>/</code>.</p></li>
</ul>

<h2>Bug Fixes</h2>

<ul>
<li><p>When using legacy secrets provider, if the current safe target has the
same URL as another safe target, a confusing error would be printed.
This change provides a much more informative error message.</p></li>
<li><p>When using a specified secrets provider for a deployment repo, a more
instructive error message is provided when multiple safe targets with
the same URL is specified.</p></li>
<li><p>Genesis doesn't like the <code>https_proxy</code> or <code>HTTPS_PROXY</code> environment
variables being set, but BOSH was happy when they were set to "".
However, upstream BOSH now considers that an error, so Genesis is
going to simply unset them.</p>

<p>If you need to use HTTPS proxy, you can still set <code>GENESIS_HONOR_ENV</code>
to a truthy value, and it will keep <code>HTTPS_PROXY</code> and <code>https_proxy</code>
environment variables from the calling scope, but only do this if
you encounter an error.</p></li>
<li><p>No longer errors when running <code>genesis version</code> if prerequisites are
missing (the lone exception of course is if perl itself is missing)</p></li>
<li><p>Clearing of the secrets provider (<code>genesis secrets-provider --clear</code>)
now works.  This puts genesis in "Legacy Mode", meaning it will use
whatever your current safe target is as the source for your genesis
secrets.  Not recommended, but there are specific use cases that
required it (for now).</p></li>
<li><p>Support --recreate for create-env environments.  This was already
supported for deploy-based environments, but was erroneously denied
for create-env based environments (ie proto-bosh)</p></li>
</ul>
        <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.6" target="_blank">Download v2.8.6</a>
      

      
      <h1 id="v2.8.5">Genesis v2.8.5</h1>
      <h2>Improvements</h2>

<ul>
<li><p>Added <code>genesis lookup --env</code> to retrieve environment variable values
used by Genesis for the specified environment.  Like all lookup
commands, '.' will return everything in JSON format, single value will
be returned as an unquoted string, and default if specified, will be
returned if environment variable specified doesn't exist.</p></li>
<li><p>Added <code>--no-bosh</code> and <code>--no-vault</code> to <code>genesis env-shell</code> command, so
that you can access a shell without forcing connections to those
services.</p></li>
<li><p>Fixed output of <code>genesis env-shell</code> so that the preamble header
doesn't go to stdout.  This better allows running a user-provided
executable as a shell (<code>--shell path/to/executable</code> option) to run
arbitrary commands inside "Genesis-space", then capturing its output.</p></li>
<li><p>Added <code>-p|--pre</code> flag to <code>genesis update</code> to allow checking for or
upgrading to prereleases.</p></li>
<li><p><code>genesis decompile-kit</code> can now take just the kit name or version.
Specifying the name will decompile the latest local version, and
specifying the version doesn't need the kit name if its unambiguous.</p></li>
<li><p>The version can handle the v prefix in <code>genesis decompile-kit</code></p></li>
<li><p>You can specify <code>latest</code> as the argument if only one kit type is in
use (which is the way Genesis is designed to function)</p></li>
<li><p>Show the version of Genesis when doing a deploy; helps with diagnoses
when user submits deploy output when encountering an error.</p></li>
</ul>

<h2>Bug Fixes</h2>

<ul>
<li><p>Ignore any 'v' prefix when specifying the version in <code>genesis
compile-kit</code></p></li>
<li><p>Fixes issues encountered when creating new environments based on the
<code>bosh</code> Genesis kit.  This also removed the confusing <code>bosh_env: --</code>
entry under <code>genesis</code> in environment yml files.</p></li>
<li><p>Future-proofing for creating new environments based on
bosh-genesis-kit v3.0.0 (--[no-]create-env option to <code>genesis new</code>)</p></li>
<li><p>Improved error messages for create-env/bosh_env conflicts.</p></li>
<li><p><code>genesis new</code> now supports environment-first call style, allowing
users to type <code>genesis &lt;env&gt; new ...</code> to create the new environment.</p></li>
<li><p>Fixes another issue with <code>genesis new</code> when <code>genesis bosh --connect</code>
has been used in the terminal session.</p></li>
<li><p><code>genesis new</code> will explicitly prune <code>genesis.bosh_env</code> when making a
new create-env based (aka proto) environment.</p></li>
<li><p>When preparing exodus data after deploy, properly handle undefined
values.</p></li>
<li><p>The <code>genesis bosh</code> command now runs in the users calling directory, so
relative paths to files work as expected.</p></li>
<li><p>Fixed bug where some systems could not validate SSH keys due to 
permission issues with here-strings.</p></li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.5" target="_blank">Download v2.8.5 from Github</a>
      
      <h1 id="v2.8.4">Genesis v2.8.4</h1>
      <h2>Bug Fixes</h2>

<ul>
<li>Manifests that contained values with percent signs were causing Genesis
failures.  This has been resolved.</li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.4" target="_blank">Download v2.8.4 from Github</a>
      
      <h1 id="v2.8.3-rc.4">Genesis v2.8.3-rc.4</h1>
      <p>This is a prerelease - please see commit messages for changes</p>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.3-rc.4" target="_blank">Download v2.8.3-rc.4 from Github</a>
      
      <h1 id="v2.8.3">Genesis v2.8.3</h1>
      <h2>Improvements</h2>

<ul>
<li><p>Command line can now take the path/env before the subcommand, without
using -C.</p>

<p>Command line can now take the enviornment before or after the command,
and no longer needs the -C.  Moving forward in 3.0, the preference will
be prefix instead of postfix, and the -C option will be dropped.</p>

<p>Unlike the postfix method, the prefix method can take a path component.
Unlike the -C option, the <code>.yml</code> doesn't need to be included (unless it
is ambiguous, such as your file is named the same as a genesis command).</p>

<p>Before:
<code>
genesis -C ../alt/path deploy my-env
</code></p>

<p>Now:
<code>
genesis ../alt/path/my-env deploy
</code></p>

<p>Before:
<code>
genesis -C deploy-dir/env.yml deploy
</code></p>

<p>Now:
<code>
genesis deploy-dir/env deploy
</code></p></li>
<li><p>User is now notified if the local kit version has changed from what
was deployed when running <code>genesis info</code></p></li>
</ul>

<h2>Bug Fixes</h2>

<ul>
<li><p>With the changes in 2.8.2, a quazi-regression was introduced regarding
BOSH targeting.  If the BOSH environment variables were set in an
environment, Genesis would use those to target the BOSH director
instead of what was specified in the environment file.</p>

<p>The target BOSH and the manner in which it is targeted has been in
flux for a number of years.  Genesis 2.8.x was meant to unify this,
but there are multiple edge cases that we've worked through, and a lot
of habits that need to be unlearned.  The following is the intended
best practices, that if followed, will keep you out of trouble.</p>

<ul>
<li>Whenever possible, use <code>genesis bosh &lt;env&gt; &lt;bosh opts and args&gt;</code> to
interact with the BOSH deployment associated with <env>.  There
should be very little technical reasons to not use this method.</li>
</ul>

<p><strong>UNLEARN:</strong></p>

<blockquote>
  <p>Genesis is 'deployment-focused', while the BOSH cli is
'director-focused'.  When you target a Genesis environment file, you
need to stop thinking about which director you are using, but which
deployment you care about; Genesis will figure out the associated
BOSH director to talk to.  One of the reasons for this paradigm
change is so users that have access to a deployment's env file, but
not the corresponding bosh deployment's repo can still access the
BOSH director needed to manage their deployment.</p>
</blockquote>

<ul>
<li>If you need to access a Genesis deployment AS a BOSH director, use
the -A option.  This will tell Genesis that the target environment
contains the connection details for the BOSH director, not its
parent.  It will also not set the -d|--deployment option.</li>
</ul>

<p>Example: <code>genesis bosh -A &lt;env&gt; &lt;bosh opts and args&gt;</code></p>

<ul>
<li><p>If you need to use the BOSH cli directly, you have two choices, each
somes with side effects:</p></li>
<li><p>Set the environment variables to connect to bosh.  This is what
Genesis does internally, but if you do this, be aware that it
lasts for the lifetime of the shell you are in, which can lead to
unexpected side-effects.  You can do this by running</p>

<p><code>eval "$(genesis bosh --connnect [-A] &lt;env&gt;)"</code></p>

<p>where the optional -A specifies use <env> as the director instead
of the deployment.</p>

<p>You can also use the bosh-genesis-kit's <code>printenv</code> addon, if you
have access to that deployment environment file.  While it is more
powerful, including support for socks5 proxy, it also impacts the
shell more.  See the bosh kit for more details.</p></li>
<li><p>Use BOSH alias configuration and log in (daily) using the bosh
deployment configuration.  This is the method Genesis used prior
to v2.8.0, and still works if you're using bosh-genesis-kit v2.2.0
or greater, and bosh-cli 6.4.4 or greater.  This has the advantage
of needing to be explicitly stated with the -e option on the bosh
call, and allowing multiple bosh directors to be authenticated
against at the same time.  The down side is you'll need to
re-authenticate periodically.</p></li>
</ul>

<p><p><strong>NOTE:</strong> If you have the BOSH environment variables set, Genesis will
now ignore them when operating on a genesis deployment environment,
but will issue a warning that it is doing so.  The environment's
explicitly or implicitly specified bosh environment will be used.</p></li>
<li><p>Fixes outdated references to pre-2.8 BOSH library calls.</p></li>
<li><p>Resolves runtime error message when not specifying kit on <code>genesis init</code></p></li>
<li><p>Resolves runtime error message for unspecified <code>use_create_env</code> property (2.8.0 feature)</p></li>
<li><p>Correctly allows recreation of existing kits with --force option in compile-kit</p></li>
<li><p>Fixes some internal kit hook bash wrappers around genesis callbacks</p></li>
<li><p>Fixes race condition when creating a new bosh enviornment where it
doesn't know the bosh director or if it is a proto bosh or not before
it asks for those values.</p></li>
<li><p>Reverts a change in v2.8.2, which would set the enviornment variable
used internally and by the hooks to use the BOSH direcctor identified
by BOSH<em>ENVIRONMENT.  The normal environment variable to do this is
GENESIS</em>BOSH<em>ENVIRONMENT, but the previous change erroneously also
included BOSH</em>ENVIRONMENT as a source for setting the BOSH director.</p></li>
<li><p>Fixed bug <code>Can't locate object method "base_url" via package "Genesis::Kit::Provider::GenesisCommunity"</code>
that occurred when <code>genesis repipe</code> was run</p></li>
</ul></p>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.3" target="_blank">Download v2.8.3 from Github</a>
      
      <h1 id="v2.8.2">Genesis v2.8.2</h1>
      <h2>Bug Fixes</h2>

<ul>
<li><p>Replaces error <code>Can't call method "execute" on an undefined value</code>
with more useful information on why BOSH director cannot be accessed.</p></li>
<li><p>Suppress repetitive deprecation messages for the environment when
processing various genesis commands.</p></li>
<li><p>The existing bosh wrapper function in Genesis::Helpers was not
compatible with the Genesis v2.8 internals regarding BOSH connectivity.
If the environment file exists, helpers will simply use <code>genesis bosh
...</code> calls to make it Just Work™.  For the rare situation where the
enviroment file doesn't exist, a much more complicated validation and
connectivity routine is employed.</p></li>
<li><p>When generating the BOSH director for an environment, and is using the
environment variables to determine the BOSH director configuration, make
sure to set the deployment name.</p></li>
</ul>

<h2>Kit Authoring Improvements</h2>

<ul>
<li><p>Added <code>version_check</code> bash function to check that the version of Genesis
meets or exceeds your hook's required version.  If you use this, make sure
your kit specifies <code>genesis_version_minimum</code> of 2.8.2.</p></li>
<li><p>Improvements to <code>genesis compile-kit</code> interface and functionality:</p>

<ul>
<li><p>Now creates a local rc release when no version is specified, for the
next patch level above the highest remote or local version found.</p></li>
<li><p>Can specify --target|-t to have the compiled kit placed in the
desired directory.  If the directory is a genesis repo, it will
place it under the directory's .genesis/kits path.</p></li>
<li><p>When using -v <version>, if that version already exists locally or
remotely, it will error out to prevent reissuing different contents
under the same version (--force can be used to overcome this
limitation).</p></li>
<li><p>When not specifying the explicit version, you can bump the major or
minor version instead of the path by using --major|-M or --minor|-m
options.  The --final option will create the next version without a
-rc# component.</p></li>
<li><p>Improved feedback while processing.</p></li>
</ul></li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.2" target="_blank">Download v2.8.2 from Github</a>
      
      <h1 id="v2.8.1">Genesis v2.8.1</h1>
      <h2>Bug Fixes</h2>

<ul>
<li><p>Genesis v2.8.0 reworked how Genesis interacted with BOSH, getting the
login information from exodus data.  However, when the exodus data is
not available, it lost its ability to specify the BOSH connectivity
via environment variables.  This has now been resolved.</p></li>
<li><p>Fixes error <code>Can't locate object method "from_envvars" via package
"Genesis::BOSH::Director"</code> when generating new genesis environment.</p></li>
<li><p>Fixes error when running <code>genesis bosh -h</code>, documents how to get help
for bosh commands instead of help for <code>genesis bosh</code></p></li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.1" target="_blank">Download v2.8.1 from Github</a>
      
      <h1 id="v2.8.0">Genesis v2.8.0</h1>
      <h2>New Features</h2>

<ul>
<li><p>Auto-connect to BOSH director.</p>

<p>Genesis can now automatically connect to the correct BOSH director for the
specified environment, without need to set up a bosh configuration or
manually logging into the director.</p>

<p>Caveat: The BOSH director that deployed your environment MUST have been
deployed by Genesis.  If not, you will still have to target and log into the
BOSH director manually.</p></li>
<li><p>Added <code>genesis bosh</code> command.</p>

<p>Instead of worrying about logging into the right BOSH director, and
translating genesis environment into BOSH environment and deployment, let
Genesis do the heavy lifting.</p>

<p>If you want to know something about your concourse vms, for example, you
just run <code>genesis bosh my-concourse-env vms --vitals</code> and you'll get the
right output.  Genesis will determine which bosh director deployed
<code>my-concourse-env</code>, how to connect to it, what the BOSH deployment is named,
and return the results of the command you specified.</p>

<p>By default, the <code>genesis bosh</code> command is deployment centric, but sometimes
you need to talk to the BOSH director itself.  In that case, you can specify
the BOSH deployment itself, and use the <code>-as-director</code> (or <code>-A</code>) option to
indicate that the environment is the director, not a deployment on a
different director.  For proto-BOSH environments, this is required.</p>

<p>See <code>genesis bosh -h</code> for more usage details.</p></li>
<li><p>Connect to BOSH director without using the BOSH deployment kit.</p>

<p>If you still need to connect to a BOSH director directly, you can configure
your shell by using <code>eval "$(genesis bosh my-target-env --connect)"</code>.
Please note that this connects to the BOSH director that deployed the
<code>my-target-env</code>.  If <code>my-target-env</code> is a bosh deployment, the command will
authenticate to the BOSH director that deployed it, not itself.  In this
case, you need to use the <code>--as-director</code> option to explicitly state that
this is the BOSH environment you wish to connect to.</p></li>
</ul>

<h2>Breaking Changes</h2>

<ul>
<li><p>Removes legacy support for kits without new or blueprint.</p>

<p>As of v2.8.0, kits must use new and blueprint hooks.  All modern kits
support this model, so anyone actively keeping current with genesis would
not be impacted.</p></li>
<li><p>Remove subkits, error if used in env file.</p>

<p>Subkits have been deprecated since at least 2.6.13, so its time to remove
them.</p></li>
<li><p>Remove <code>--environment</code> global option.</p>

<p>The environment option has been replaced with <code>--bosh-env</code> option to remove
confusion regarding the overloaded 'environment' name.  Henceforth,
environment refers to just the deployment environment.  The <code>-e</code> shortform
is still usable.</p></li>
</ul>

<h2>Improvements</h2>

<h3>Better Support for using BOSH create-env</h3>

<ul>
<li><p>Starting in v2.8.0, kits that indicate that they are compatible with
v2.8.0 can support <code>use_create_env</code> as their method of indicating
their ability to use create-env instead of deploy for deployments.</p>

<ul>
<li><p>Valid values are <code>yes</code> for this kit always uses create-env, <code>no</code> for
kits that cannot use create-env, and <code>allow</code> for kits that permit
either.</p></li>
<li><p>The kit will have to detect <code>genesis.use_create_env</code> in the
environment to determine blueprint and other create-env kit
behaviour.  Genesis will manage the actual deployment and state file
associated with it.</p></li>
</ul></li>
<li><p>Genesis properly handles both legacy features (create-env,bosh-init,
proto) and v2.8.0's <code>genesis.use_create_env</code> attribute to determine is
create-env is to be used.  It will also detect when an incompatible
mixture of using create-env and specifying a <code>genesis.bosh-env</code>
attribute, and fail with an appropriate error message.  A quick update
of the environment file by the user will resolve this issue when
encountered.</p>

<ul>
<li>Provide create-env (i.e.: bosh proto) deployments with diff/confirm</li>
</ul>

<p>Since BOSH does not provide a confirmation after a diff on the
environment to be deployed, Genesis provides this based on a previous
deployment, assuming it was added to the repo.</p>

<p>If the exodus data from the previous deployment doesn't match the local
archived manifest, a warning will be stated, or in the case of running
under <code>-y</code>, the deploy will be aborted.</p>

<p>This does require that you ensure you commit your repo after doing 
deployments, which you should be doing regardless of this feature, as
a method to record your deployment history. </p></li>
</ul>
<h3>Kit Overrides by Environment</h3>



150750f8c54d845785f421ddb3b535c6



<p>```</p>

<p>And in an inheritting file:</p>

<p>```
kit:
overrides:</p>

<ul>
<li>(( append ))</li>
<li>second:
stuff: overwritten</li>
<li>|
even_more: true
```</li>
</ul></li>
</ul></li>
</ul>

<h3>Improved Kit Behaviour</h3>

<ul>
<li><p>Improve params handling for use in <code>new</code> hook.</p>

<ul>
<li><p>Support multiline values in keys and arrays in <code>param_entry</code>.</p></li>
<li><p>Echo <code>param_comment</code> to screen so the same information that prefaces the
value in the env.yml file can be used as an explanatory blurb prior to the
prompt.</p></li>
</ul></li>
<li><p>Improve decompile-kit</p>

<ul>
<li><p>Can decompile kit to directories other than ./dev (<code>--directory &lt;dir&gt;</code>)</p></li>
<li><p>Can specify an environment YAML file to identify which kit to decompile,
instead of explicitly stating the kit/version.</p></li>
</ul></li>
</ul>

<h3>Better BOSH Config Management</h3>

<ul>
<li><p>Support downloading multiple configs.</p>

<p>Before, if you specified to download a config type (ie cloud or runtime)
without a name, it would download only the unnamed <em>default</em> config of that
type.  Experience has shown that the more correct interpretation should be
to download all configs of that type, and merge them (in the order they are
specified in the BOSH director).  The old behaviour can still be used by
explicitly stating <code>default</code> as the name.</p></li>
</ul>

<h3>Messaging / Error Handling / Debugging</h3>

<ul>
<li><p>Added stderr output capture for <code>Genesis::Vault#get</code>.</p>

<p>Rather than have the raw safe stderr leak out to the user, we now capture it
and write it to the DEBUG stream.</p></li>
<li><p>Improve deploy help output for create-env environments</p>

<p>There are difference behaviours for create-env environment than from
environments deployed via a BOSH director.  This update calls them out
and gives instructions on their use.</p></li>
<li><p>Improved error message when kit.features is incorrectly formed in environment YAML files.</p></li>
<li><p>Better diagnosis messages when running PING in debug mode.</p></li>
</ul>

<h2>Bug Fixes</h2>

<ul>
<li><p>Kits can now specify required prerequisites via hook.</p>

<p>Although the prereqs hook was documented, it was only partially
implemented.  This commit completes that implementation, so that if
<code>hooks/prereqs</code> exists in a kit, it will be run prior to usage.</p></li>
<li><p>Fix bug where default config type was lost when fetching configs from BOSH
director, resulting in bad messages and error reports.</p></li>
<li><p>Export <code>GENESIS_EXODUS_MOUNT</code> to hooks environment.  This was missing from the
set of vault path environment variables available to hook scripts.</p></li>
</ul>

<h2>Internal Changes/Improvements</h2>

<h3>BOSH Refactor</h3>

<ul>
<li><p>Add <code>Genesis::BOSH</code> for controlling BOSH director.</p>

<p>This is a major refactor to facilitate better operation and connections
to BOSH directors.  Connections to Bosh will use exodus data to
determine the corresponding BOSH director address and connection
details.</p></li>
<li><p>Set <code>GENESIS_BOSH_COMMAND</code> when checking BOSH cmd</p>

<p>Also removes <code>check_bosh_version</code> subroutine that was replaced by
<code>Genesis::BOSH#command</code></p></li>
<li><p>Change <code>needs_bosh_create_env</code> to <code>use_create_env</code></p></li>
</ul>

<h3>Functionality Improvement</h3>

<ul>
<li><p>Allow <code>Genesis::Kit#metadata</code> to take args.</p>

<p>If Genesis::Kit#metadata receives no arguments, it will return a hash
reference for all metadata for the kit.  If it gets a single value, it
returns the metadata corresponding to the key of that value.  Finally,
if it gets a list of values, it will return a list of the metadata
corresponding to the keys of the given values.</p></li>
</ul>

<h3>Efficiencies</h3>

<ul>
<li><p>Lazy-load kit provider types as needed.</p>

<p>By using <code>require</code> instead of <code>use</code> for loading the
<code>Genesis::Kit::Provider::*</code> classes, they are loaded as needed during
runtime instead of fully loaded at compile-time.</p></li>
<li><p>Memoize <code>Genesis::Env</code> <code>params</code> and <code>actual_environment_files</code>.</p></li>
</ul>

<h3>Structure / Maintainability</h3>

<ul>
<li><p>Reordered <code>lib/Genesis/Env.pm</code>, with folding and grouping.</p>

<p>This is done to be consistent with the other lib files.  No actual code
changed in this release, but the diff is massive because blocks were
moved into logical groupings.</p></li>
<li><p>Privatized <code>Genesis::Env#validate_name</code>.</p>

<p><code>validate_name</code> method should only be used internally, so it was renamed
<code>_validate_env_name</code>.</p></li>
<li><p>Fixes inconsistant private variable naming.</p>

<ul>
<li><code>_configs</code> has been changed to <code>__configs</code> in <code>Genesis::Env</code>, to match all
other private instance variables.</li>
</ul></li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.8.0" target="_blank">Download v2.8.0 from Github</a>
      
      <h1 id="v2.7.35">Genesis v2.7.35</h1>
      <h2>Bug Fix</h2>

<ul>
<li><p>Update Genesis bosh activities to work with BOSH cli v6.4.4</p>

<p>As of BOSH cli 6.4.4, BOSH_* variables set to "" cause errors, so now they are simply unset.</p></li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.7.35" target="_blank">Download v2.7.35 from Github</a>
      
      <h1 id="v2.7.34">Genesis v2.7.34</h1>
      <h2>Improvements</h2>

<ul>
<li><code>genesis init</code> can now accept a local compiled kit file as an argument to the <code>-k</code> option, allowing locally compiled (or stored) released kit files instead of relying on the local uncompiled <code>dev</code> directory.</li>
</ul>

<h2>Requirement Updates</h2>

<ul>
<li>BOSH CLI v6.4.4 is now required due to error when accessing non-bosh.io stemcells that are now being specified by upstream deployments.</li>
</ul>

<h2>Bug Fixes</h2>

<ul>
<li><code>genesis kit-manual</code> now works on dev kits, or environments that use dev
kits</li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.7.34" target="_blank">Download v2.7.34 from Github</a>
      
      <h1 id="v2.7.33">Genesis v2.7.33</h1>
      <h2>New Feature</h2>

<ul>
<li><p>Add <code>update</code> genesis command to get new version</p>

<p>Usage: genesis update [-c|--check] [-v|--version VERSION] [-d|--details] [-f|--force]</p>

<p>-c, --check       Check if a newer version (or the specified version) is
                  available.</p>

<p>-v, --version <x> Install the specified version instead of the latest</p>

<p>-d, --details     Print the release notes of the versions between the current
                  version and the latest (or the release notes of the
                  specified version)</p>

<p>-f, --force       Replace the current genesis executable.  Otherwise,
                  confirmation will be requested.</p></li>
</ul>

<h2>Improvements</h2>

<ul>
<li><p>Improve <code>genesis kit-provider -v</code> status output</p></li>
<li><p>Improve <code>genesis list-kits</code> hint to include -r flag.</p></li>
<li><p>Make it easier to trace the stack</p>

<p>Adds the -S|--show-stack debug option, and gives better context of traces
and errors.</p>

<p>Behaviour Changes:</p>

<ul>
<li><p>internal <code>trace</code> output will show the location in the code were it was
called. If --show-stack option specified, it will show the full stack
instead of just the location.</p></li>
<li><p>internal <code>dump_vars</code> output will now show the full stack instead of
just the calling location if --show-stack specified (along with
--trace or --debug)</p></li>
<li><p>internal <code>bail</code> will show calling location if --trace or --debug is
specified, or the full stack if --show-stack is specified (with or
without --debug or --trace).  This allows you to see where genesis
terminates without wading through all the trace output.</p></li>
<li><p>internal <code>bug</code> will always full stack where the bug was encountered.
This allows the user to paste the stack into a defect report against
the genesis project.</p></li>
</ul></li>
<li><p>Limited false positives of detected changes in pipeline notify summaries. </p></li>
</ul>

<h2>Bug Fixes</h2>

<ul>
<li><p>Fix getting non-production github release version</p>

<p>If user specified version by name, it should include draft and
prereleases when looking for it.  This was the initial intent, but the
wrong options were set when attempting it.</p></li>
<li><p>Fix error when calling <code>genesis man</code> on a kit that does not exist.</p></li>
<li><p>Fixes issue where proto-bosh deployment did not have up to date state file.</p></li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.7.32" target="_blank">Download v2.7.33 from Github</a>
      
      <h1 id="v2.7.32">Genesis v2.7.32</h1>
      <h2>Updates</h2>

<ul>
<li>credhub-cli is now a requirement. A check for credhub-cli has been added 
jq v1.6 is now the minimum version required. </li>
</ul>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.7.32" target="_blank">Download v2.7.32 from Github</a>
      
      <h1 id="v2.7.31">Genesis v2.7.31</h1>
      <h2>Updates</h2>

<p>-Can now update subject, SAN, and usage of vault-stored certificates without generating a new key with genesis rotate-secrets --renew
 This allows users to correct warnings that show up in the check during deployment without breaking mutual TLS.
 (Note this will also renew the TTL for the certificates)</p>
      <a class="button" href="https://github.com/starkandwayne/genesis/releases/tag/v2.7.31" target="_blank">Download v2.7.31 from Github</a>
      

    </div>
  </div>

  <footer>
    <div class="g">
      <div class="x3">
        <img src="/swlogo.png?0b567bdcee59ac95e3eaf667ec543ebc1631d6c0">

        <p>Genesis is maintained by Stark &amp; Wayne,
        a leading Cloud-Native consulting firm.</p>
      </div>

      <div class="x3">
        <nav>
          <li><a href="/">Home</a></li>
          <li><a href="/download/">Download</a></li>
          <li><a href="/community/">Community</a></li>
          <li><a href="/docs/">Docs</a></li>
        </nav>
      </div>

      <div class="x3">
      </div>
    </div>

    <div class="copyright">
      <p>Copyright &copy; 2021 The Genesis Authors.  All rights reserved.</p>
    </div>
  </footer>
  <script type="text/javascript" src="/site.js?d2112e355882784cf7f38561cf3ccb0bd5da3111"></script>
</body>
</html>
